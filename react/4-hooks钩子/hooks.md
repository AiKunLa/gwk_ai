# hooks
- useState
    - 函数式编程
    - 函数式一等对象
    - 函数式类
    - 函数是组件

## 组件的生命周期 lifecyle
1. 挂载阶段（Mounting）
    - 组件初始化
    - 执行组件函数体代码
    - 渲染组件
    ```js
        // 只会在组件挂载时执行一次 其他的useEffect也会执行
        useEffect(() => {
            return () => {
                // 这里可以加载数据
            }
        },[]) // 空依赖数组

        useEffect(() => {
            // 每次渲染后都会执行(包括首次)
        });
    ```
2. 更新阶段 （updating）
    - 执行组件函数体代码
    - 组件重新渲染
    ```js

        // 当依赖项发生改变时执行 首次挂载时也会执行
        useEffect(() => {
            return () => {

            }
        },[count]) // 有依赖数组
    ```

3. 卸载阶段（Unmounting）
    - 组件从DOM中移除
        组件卸载时执行清理操作（如果不清理会造成内存泄漏）
    - 执行清理操作（如定时器、事件监听器等）
    ```js
        // 当前组件卸载时执行
        useEffect(() => {
            // 开启定时器
            const timer = setInterval(() => {
                setTime(prevTime => prevTime+1)
            }, 1000)

            // 关闭定时器 组件卸载时执行
            return () => {
                clearInterval(timer)
                // 这里可以卸载数据(如关闭定时器)
            }
        },[])
    ```


## useEffect
useEffect是React中提供的钩子函数之一,它允许组件在渲染后执行副作用操作，也叫做生命周期函数
jsx函数执行——》组件模板编译——》挂载组件到root——》组件渲染/更新——》useEffect执行
1. 作用:
    - 组件渲染后执行(也就是副作用)
    - 可以在组件渲染后执行副作用操作,（组件第一次渲染所有的useEffect会执行）
    - 监听特定值的变化（需要指定参数（也是依赖），可以有多个）,并在值变化时执行副作用操作，这是因为每次数据变换都会导致组件重新渲染,监听特定值并执行useEffect（这时候只有特点值发生改变时才会执行）

        ```js
        useEffect(() => {
            // 副作用操作
        },[count])
        ```
    - 组件卸载时清理
        - 若发起请求后响应式数据、DOM都不在了，这是后请求也需要取消，就可以通过useEffect的返回值来清理
         - 组件从DOM中移除
            组件卸载时执行清理操作（如果不清理会造成内存泄漏）
        - 执行清理操作（如定时器、事件监听器等）
        ```js
            // 当前组件卸载时执行
            useEffect(() => {
                // 开启定时器
                const timer = setInterval(() => {
                    setTime(prevTime => prevTime+1)
                }, 1000)

                // 关闭定时器 组件卸载时执行
                return () => {
                    clearInterval(timer)
                    // 这里可以卸载数据(如关闭定时器)
                }
            },[])
        ```

2. 为什么useEffect 的回调函数不能直接使用async，而在回调函数内部可以使用async
 

## 组件在什么时候请求接口
- 组件第一时间渲染是最重要的，渲染后使用useEffect去请求结构，这样会避开与组件争抢
- 
# HTTP & HTTPS

https是更加安全的http协议，他多了移除SSL/TLS加密层

OST七层模型
用户这边

- 应用层 提供用户接口 GET / HTTP FTP
    Https就是在这一层中添加了一个加密层
- 表示层 Presentation  做数据格式的转换
- 会话层 Session Cookie 会话管理
- 传输层 TCP端到端通信
- 网络层 IP 地址来确定路由选择
- 数据链路层 MAC地址 负责帧的传输
- 物理层 传输比特流

- HTTPS 建立

    - 解决中间人攻击
    - 加密/解密
        私钥或公钥。 私钥 自己加密 自己解密。 公钥 任何人都可以拿到进行加密
            A把公钥发给B，B进行加密，只有A才能打开。这种方式的性能差
        对称加密
            使用一个密钥进行加密和解密
        非对称加密
            使用一对密钥，公钥和私钥。公钥进行加密，私钥进行解密

    - https密钥使用方式
        浏览器输入网址后会向服务器发送TLS握手请求，然后服务器将自己的数字证书发给客户端
        证书中包含：服务器的域名、服务器的公钥
        客户端使用CA的公钥去验证证书上的签名，若签名有效 那么客户端会生成一个预主密钥，并使用服务器提供的公钥进行加密并发送给服务器，服务器用私钥进行解密。最后服务器和客户端通过相同的算法生成会话密钥进行对话，进行对称加密

        TSL 1.3比较快了，HTTPS性能（速度）问题可以忽略


        实际只在握手阶段使用非对称加密，数据传输用对称加密。
        私钥永远只应保存在服务器，泄露会导致中间人攻击。

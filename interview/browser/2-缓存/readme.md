# 缓存
## URL输入到页面显示是一个前提
- 知识体系
- 多进程多线程架构是前提
- 先补全url

- 输入网址并解析
    1. 解析  非结构字符串，搜索关键字
        有结构的字符串，
        协议：主机、端口、路径、参数、锚点
        http(s) 
        web80 nigx(代理) 
    2. 浏览器解析协议、主机、端口、路径等，并**构造**一个http请求，补全请求地址，如协议、端口等
        总结而言是解析url，构造请求，应为请求都后面是请求行、请求头、请求体
        由于同一主机的不同端口，对应的是不同程序或服务
        从dns 解析 ip地址 80-> http 443 http
        - 带上cookie
        - 补全url 
            例如 bilibili.com 补全为 https://www.bilibili.com/ 这样可以提高用户体验
            **若不带https** 输入 http://www.bilibili.com/ 他会变为 https://www.bilibili.com/
            这是一个重定向，因为使用http它是不安全的

                - 可以用于各种方法 不会改变请求方法
                307 Temporary Redirect 临时跳转 请求的资源暂时地位于另一个 URL 下。
                308 Premanent Redirect

                - 支持GET请求，哪怕请求不是GET，也会改成GET
                301 Moved Permanently 永久移动 请求的资源已被永久地移动到了一个新的 URL。
                302 Found 请求的资源**暂时地**位于另一个 URL 下。
                
            当我们我们发生请求的时候，首先响应的是状态码，还有就是location，这个location是之后重定向的地址

        - 发送请求之前，根据请求头中expires 和 cache-control 判断是否命中强缓存 （）
            **强缓存**：
                当浏览器请求一个资源时，会先查看是否启用了强缓存，并根据响应头中的相关字段判断缓存是否过期。服务器在响应资源的同时也会带着一个请求头，这里面带有这个资源过期的时间
                当请求数据时会先在缓存中查询资源若缓存资源
                **未过期**：直接从本地（内存或磁盘）读取资源(disk cache)，完全不向服务器发送请求，状态码通常显示为 200 (from memory cache) 或 200 (from disk cache)。
                **已过期**：则进入协商缓存阶段，向服务器发送请求验证资源是否更新。
            **协商缓存**
                当强缓存没有命中，同时资源在服务器端也不一定修改了，我们先知会一下服务器了解了解
                如果资源未修改，服务器返回 304 Not Modified，不返回资源内容，浏览器继续使用本地缓存。
                    若未修改，返回 304。
                    否则返回 200 和新资源。
                具体的判断逻辑是，客户端发送请求，请求中携带请求资源的ETag，服务端读取该文件并生成对应的ETag。然后比较两者是否相同，若相同则返回304 表示让浏览器继续使用缓存中的资源，若不同则返回新的数据并携带 含有ETag的请求头以及相应的过期时间
